{% extends "base.html" %}
{% block content %}

<div id="control">


</div>

{% endblock %}

{% block extra_styles %}
{% endblock %}

{% block extra_end_scripts %}


<script>
	function init_item(name, data) {
		var my_row = document.createElement('div');
		my_row.setAttribute('class', 'row');

		let label_txt = document.createElement('output');
		label_txt.value = name;
		label_txt.type = 'label';
		my_row.appendChild(label_txt);
		
		// create slider
		let control = document.createElement('input');
		control.type = "range";
		control.value = data[name];
		control.addEventListener("change", function () {
			let val  = control.value
			$.get('/feature/' + name + '/' + val, function (val, status) {
				label_val.value = val.result				
			});
		});
		my_row.appendChild(control);
	
		// create label val
		let label_val = document.createElement('output');
		label_val.type = 'label';
		label_val.value = data[name];
		my_row.appendChild(label_val);

		document.getElementById('control').appendChild(my_row);
	};

	function build_page() {
		$.get('/data/', function (data, status) {
			for (var key in data) {
				init_item(key, data)
			};
		});
	}

	window.onload = build_page

</script>
{% endblock %}